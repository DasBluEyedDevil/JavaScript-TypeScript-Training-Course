<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.WebView?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.jstslearning.controller.MainController"
            stylesheets="@../styles/main.css">

    <!-- Top: Header with progress -->
    <top>
        <VBox styleClass="header">
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="title-bar">
                <Label text="JavaScript/TypeScript Learning Platform"
                       style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="From Zero to Full-Stack Developer"
                       style="-fx-font-size: 14px; -fx-text-fill: #ecf0f1;"/>
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="15" padding="10" styleClass="progress-bar-container">
                <Label fx:id="progressLabel" text="Progress: 0/0 lessons completed (0%)"
                       style="-fx-font-size: 12px;"/>
                <ProgressBar fx:id="progressBar" progress="0" prefWidth="300" styleClass="custom-progress-bar"/>
            </HBox>
        </VBox>
    </top>

    <!-- Left: Module/Lesson Navigation -->
    <left>
        <VBox styleClass="sidebar" spacing="10">
            <Label text="Course Modules" styleClass="sidebar-title"/>
            <TreeView fx:id="moduleTreeView" VBox.vgrow="ALWAYS" styleClass="module-tree"/>
        </VBox>
    </left>

    <!-- Center: Main Content Area -->
    <center>
        <SplitPane dividerPositions="0.55" orientation="VERTICAL" styleClass="content-split">
            <!-- Top: Lesson Content -->
            <VBox styleClass="lesson-panel">
                <Label text="ðŸ“š Lesson Content" styleClass="panel-title"/>
                <WebView fx:id="lessonWebView" VBox.vgrow="ALWAYS"/>
            </VBox>

            <!-- Bottom: Code Editor & Output -->
            <VBox styleClass="code-panel">
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="panel-header">
                    <Label text="ðŸ’» Interactive Code Challenge" styleClass="panel-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="runCodeButton" text="â–¶ Run Code" styleClass="button-run"/>
                    <Button fx:id="submitButton" text="âœ“ Submit" styleClass="button-submit"/>
                    <Button fx:id="showSolutionButton" text="ðŸ’¡ Show Solution" styleClass="button-solution"/>
                </HBox>

                <SplitPane dividerPositions="0.6" VBox.vgrow="ALWAYS" styleClass="code-split">
                    <!-- Code Editor -->
                    <VBox styleClass="editor-container">
                        <Label text="Your Code:" style="-fx-font-weight: bold; -fx-padding: 5;"/>
                        <TextArea fx:id="codeEditor"
                                  promptText="Write your JavaScript code here..."
                                  wrapText="false"
                                  VBox.vgrow="ALWAYS"
                                  styleClass="code-editor"/>
                    </VBox>

                    <!-- Output Area -->
                    <VBox styleClass="output-container">
                        <Label text="Output:" style="-fx-font-weight: bold; -fx-padding: 5;"/>
                        <TextArea fx:id="outputArea"
                                  editable="false"
                                  wrapText="true"
                                  VBox.vgrow="ALWAYS"
                                  styleClass="output-area"/>
                    </VBox>
                </SplitPane>
            </VBox>
        </SplitPane>
    </center>

</BorderPane>
